@page
@model IndexModel
@{
    ViewData["Title"] = "Users";
}

<div class="container">
    <h1 class="display-4">Users</h1>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody id="userTableBody"></tbody>
    </table>
</div>

<script>
    async function fetchUsers() {
        try {
            const response = await fetch('https://localhost:7195/api/Users');
            const users = await response.json();

            const userTableBody = document.getElementById('userTableBody'); // Assuming this is your table body element

            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                <td>${user.userId}</td>
                <td>${user.username}</td>
                <td>${user.createdAt}</td>
            `;
                userTableBody.appendChild(row);
            });

        } catch (error) {
            console.error('Error fetching users:', error);
        }
    }

    document.addEventListener('DOMContentLoaded', fetchUsers);

</script>
